<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å®è´å£¹å‘¨å² - æ¢¦å¹»æ‰‹è´¦æ´¾å¯¹å¢™</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap');

        :root {
            --bg-red: #e63946;
            --white: #ffffff;
            --yellow: #ffbe0b;
            --blue: #3a86ff;
            --pink: #ff006e;
            --green: #06d6a0;
            --orange: #fb5607;
            --dark: #333333;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            background-color: var(--bg-red);
            background-image: radial-gradient(rgba(255,255,255,0.1) 2px, transparent 2px);
            background-size: 60px 60px;
            font-family: 'ZCOOL KuaiLe', cursive;
        }

        /* æä¸°å¯Œçš„æ˜Ÿå…‰å±‚ */
        #star-layer { position: absolute; width: 100%; height: 100%; pointer-events: none; }

        /* å½©æ—— */
        .bunting {
            position: absolute; top: 0; left: 0; width: 100%;
            display: flex; justify-content: space-around; z-index: 100;
        }
        .flag {
            width: 50px; height: 70px; background: var(--yellow);
            clip-path: polygon(0% 0%, 100% 0%, 50% 100%);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: #333; font-weight: bold;
            animation: flagSwing 3s infinite ease-in-out; transform-origin: top;
        }

        /* ä¸»èˆå° */
        .stage {
            display: flex; width: 100%; height: 100%;
            align-items: center; justify-content: center;
            gap: 150px; padding: 50px; box-sizing: border-box;
            position: relative; z-index: 50;
        }

        /* ç…§ç‰‡è£…é¥° */
        .photo-wrapper { position: relative; }
        .crown {
            position: absolute; top: -85px; left: 50%;
            transform: translateX(-50%) rotate(-15deg);
            font-size: 110px; z-index: 60;
            filter: drop-shadow(8px 8px 0 rgba(0,0,0,0.2));
            animation: crownFloat 2.5s infinite ease-in-out;
        }
        .photo-container {
            width: 450px; height: 450px;
            background: #fff; padding: 0px; border-radius: 50px;
            box-shadow: 25px 25px 0px rgba(0,0,0,0.2);
            border: 10px solid var(--yellow);
            position: relative; cursor: pointer;
            transform: rotate(-2deg);
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; transition: 0.4s;
        }
        .photo-container:hover { transform: rotate(0deg) scale(1.05); }
        #baby-photo { width: 100%; height: 100%; object-fit: cover; display: none; }

        /* æè‡´ä¸°å¯Œçš„ç¥ç¦è´´çº¸ç³»ç»Ÿ */
        .wish-tag {
            position: absolute; padding: 10px 25px;
            font-size: 1.8rem; font-weight: bold;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.15);
            z-index: 30; animation: floatAnim 4s infinite ease-in-out;
            white-space: nowrap;
        }
        /* èƒ¶å¸¦å‹ */
        .tag-tape { background: var(--white); border-left: 15px solid var(--blue); border-right: 15px solid var(--blue); transform: rotate(var(--r)); }
        /* å‹‹ç« å‹ */
        .tag-badge { background: var(--yellow); border-radius: 50px; border: 4px dashed var(--dark); }
        /* å¯¹è¯æ¡†å‹ */
        .tag-bubble { background: var(--pink); color: white; border-radius: 20px 20px 20px 0; border: 4px solid var(--dark); }
        /* æ‰‹å†™æ„Ÿå‹ */
        .tag-hand { background: var(--green); color: white; border-radius: 50% 20% 50% 20%; border: 4px solid var(--dark); }

        /* å›¾æ ‡ç³»ç»Ÿ */
        .item { position: absolute; z-index: 10; filter: drop-shadow(10px 10px 0 rgba(0,0,0,0.1)); animation: floatAnim 5s infinite; }

        /* æ ‡é¢˜åŒºåŸŸ */
        .main-title {
            font-size: 11rem; color: var(--white);
            text-shadow: 12px 12px 0px var(--dark);
            margin: 0; letter-spacing: 15px;
            animation: pop 1.5s infinite alternate;
        }
        .date-sticker {
            background: var(--yellow); padding: 10px 40px; border-radius: 50px;
            border: 4px solid #333; font-size: 2.5rem; transform: rotate(2deg);
            margin-top: 70px;
        }

        /* åŠ¨ç”»åº“ */
        @keyframes flagSwing { 0%, 100% { transform: rotate(-6deg); } 50% { transform: rotate(6deg); } }
        @keyframes crownFloat { 0%, 100% { transform: translateX(-50%) translateY(0) rotate(-15deg); } 50% { transform: translateX(-50%) translateY(-20px) rotate(-5deg); } }
        @keyframes floatAnim {
            0%, 100% { transform: translate(0, 0) rotate(var(--r)); }
            50% { transform: translate(10px, -20px) rotate(calc(var(--r) + 5deg)); }
        }
        @keyframes pop { from { transform: scale(1); } to { transform: scale(1.05); } }

        /* åº•éƒ¨æ ‡è¯­ */
        .bottom-banner {
            position: absolute; bottom: 20px; width: 100%;
            text-align: center; font-size: 2.2rem; color: white;
            letter-spacing: 15px; z-index: 100; font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* è£å‰ªçª—å£ */
        #crop-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9999;
            flex-direction: column; align-items: center; justify-content: center;
        }
        .crop-container { width: 80%; max-height: 70vh; background: #fff; }

         /* å½©å±‘å®¹å™¨ - é“ºæ»¡å…¨å±ä½†ç©¿é€ç‚¹å‡» */
        #confetti-canvas {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none; z-index: 1000;
        }
    </style>
</head>
<body>

    <!-- å½©å±‘ç³»ç»Ÿå®¹å™¨ -->
    <canvas id="confetti-canvas"></canvas>

    <div id="star-layer"></div>

    <!-- é¡¶éƒ¨æ——å¸œ -->
    <div class="bunting">
        <div class="flag">H</div><div class="flag">A</div><div class="flag">P</div><div class="flag">P</div><div class="flag">Y</div>
        <div class="flag">â˜…</div><div class="flag">1</div><div class="flag">S</div><div class="flag">T</div>
    </div>

    <!-- 10ä¸ªæ¾æ•£åˆ†å¸ƒçš„ç¥ç¦è¯­ï¼ˆå…¨å±å¹•æ•£ç‚¹åˆ†å¸ƒï¼‰ -->
    <div class="wish-tag tag-tape" style="top: 15%; left: 8%; --r: -10deg;">ğŸŒŸ èªæ˜ä¼¶ä¿</div>
    <div class="wish-tag tag-badge" style="top: 10%; right: 20%; --r: 5deg;">ğŸ­ ç”œç¾å¯çˆ±</div>
    <div class="wish-tag tag-bubble" style="bottom: 25%; left: 5%; --r: -5deg;">ğŸš€ å‰ç¨‹ä¼¼é”¦</div>
    <div class="wish-tag tag-hand" style="bottom: 15%; right: 10%; --r: 8deg;">ğŸ€ ç”Ÿæ—¥å¿«ä¹</div>
    <div class="wish-tag tag-tape" style="top: 40%; left: 2%; --r: 15deg; background: var(--orange); border-color: white; color: white;">ğŸˆ å¿«ä¹ä¸‡å²</div>
    <div class="wish-tag tag-badge" style="top: 45%; right: 3%; --r: -8deg; background: var(--pink); color: white;">âœ¨ äººè§äººçˆ±</div>
    <div class="wish-tag tag-bubble" style="top: 15%; left: 35%; --r: 12deg; background: var(--green);">ğŸŒˆ æ»¡å¿ƒæ¬¢å–œ</div>
    <div class="wish-tag tag-hand" style="bottom: 10%; left: 30%; --r: -12deg; background: var(--blue);">ğŸ‚ ä¸€å²ä¸€ç¤¼</div>
    <div class="wish-tag tag-tape" style="bottom: 21%; right: 28%; --r: 5deg; background: var(--yellow);">ğŸ¼ èŒå£®æˆé•¿</div>
    <div class="wish-tag tag-badge" style="top: 78%; left: 15%; --r: -5deg; background: var(--white);">ğŸŒ é˜³å…‰å¼€æœ—</div>

    <!-- å›¾æ ‡è£…é¥°ï¼ˆå¡«å……æ¯ä¸€ä¸ªç©ºç™½ä½ç½®ï¼‰ -->
    <div class="item" style="top: 8%; left: 2%; font-size: 100px;">ğŸˆ</div>
    <div class="item" style="top: 5%; right: 5%; font-size: 120px;">ğŸŒˆ</div>
    <div class="item" style="bottom: 5%; left: 3%; font-size: 140px;">ğŸ</div>
    <div class="item" style="bottom: 5%; right: 3%; font-size: 150px;">ğŸ‚</div>
    <div class="item" style="top: 25%; left: 25%; font-size: 60px;">âœ¨</div>
    <div class="item" style="top: 25%; right: 35%; font-size: 50px;">â˜€ï¸</div>
    <div class="item" style="top: 26%; right: 52%; font-size: 50px;">â˜€ï¸</div>
    <div class="item" style="bottom: 40%; left: 8%; font-size: 80px;">ğŸ§¸</div>
    <div class="item" style="top: 55%; right: 8%; font-size: 90px;">ğŸ©</div>
    <div class="item" style="top: 25%; right: 12%; font-size: 70px;">ğŸ¦</div>
    <div class="item" style="bottom: 20%; left: 45%; font-size: 60px;">ğŸ­</div>
    <div class="item" style="top: 5%; left: 48%; font-size: 50px;">â˜ï¸</div>

    <div class="stage">
        <div class="photo-wrapper">
            <div class="crown">ğŸ‘‘</div>
            <div class="photo-container" onclick="document.getElementById('file-input').click()">
                <img id="baby-photo" src="">
                <div id="upload-hint" style="display: flex;flex-direction: column;justify-content: center;align-items: center;">
                    <p style="font-size:80px; margin:0;">ğŸ‘¶</p>
                    <p style="font-size:2rem; margin:10px 0;">ç‚¹å‡»ä¸Šä¼ (æ”¯æŒè£å‰ª)</p>
                </div>
            </div>
            <input type="file" id="file-input" hidden accept="image/*">
        </div>

        <div class="text-area">
            <h1 class="main-title">ä¸€å‘¨å²å•¦</h1>
            <div class="date-sticker">
                <!-- <span>2026-xx-xx</span> -->
                <span style="margin-left: 15px;">æ„¿ä½ çš„ä¸–ç•Œæ°¸è¿œçº¯çœŸç¾å¥½ï¼Œå¹³å®‰å–œä¹</span>
            </div>
        </div>
    </div>

    <div class="bottom-banner">
        âœ¦ HAPPY BIRTHDAY âœ¦ SWEET BABY âœ¦ HAPPY BIRTHDAY âœ¦
    </div>

    <!-- è£å‰ªçª—å£ -->
    <div id="crop-modal">
        <div class="crop-container"><img id="crop-image" src=""></div>
        <button onclick="confirmCrop()" style="padding:15px 60px; font-size:2rem; background:var(--yellow); border:none; border-radius:50px; margin-top:30px; cursor:pointer; font-family:inherit; font-weight:bold;">å®Œæˆè£å‰ª</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script>
        // 1. åŠ¨æ€èƒŒæ™¯æ˜Ÿæ˜Ÿ
        const starLayer = document.getElementById('star-layer');
        for (let i = 0; i < 40; i++) {
            const star = document.createElement('div');
            star.innerHTML = 'â˜…';
            star.style.position = 'absolute';
            star.style.left = Math.random() * 100 + 'vw';
            star.style.top = Math.random() * 100 + 'vh';
            star.style.color = 'white';
            star.style.opacity = Math.random() * 0.5;
            star.style.fontSize = Math.random() * 20 + 10 + 'px';
            star.style.animation = `pop ${Math.random()*2+2}s infinite alternate`;
            starLayer.appendChild(star);
        }

        // 2. è£å‰ªé€»è¾‘
        const fileInput = document.getElementById('file-input');
        const cropModal = document.getElementById('crop-modal');
        const cropImage = document.getElementById('crop-image');
        const babyPhoto = document.getElementById('baby-photo');
        let cropper = null;

        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    cropImage.src = event.target.result;
                    cropModal.style.display = 'flex';
                    if(cropper) cropper.destroy();
                    setTimeout(() => {
                        cropper = new Cropper(cropImage, { aspectRatio: 1, viewMode: 1 });
                    }, 100);
                };
                reader.readAsDataURL(file);
            }
        });

        function confirmCrop() {
            const canvas = cropper.getCroppedCanvas({ width: 800, height: 800 });
            babyPhoto.src = canvas.toDataURL();
            babyPhoto.style.display = 'block';
            document.getElementById('upload-hint').style.display = 'none';
            cropModal.style.display = 'none';
        }
    </script>
    <script>
        // --- æ ¸å¿ƒï¼šé«˜çº§å½©å±‘é£èˆç³»ç»Ÿ ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let canvasW, canvasH;
        const particles = [];
        const colors = ['#ffbe0b', '#fb5607', '#ff006e', '#8338ec', '#3a86ff', '#06d6a0', '#ffffff'];
        const shapes = ['square', 'circle', 'triangle'];

        function initCanvas() {
            canvasW = canvas.width = window.innerWidth;
            canvasH = canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', initCanvas);
        initCanvas();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvasW;
                this.y = Math.random() * canvasH - canvasH;
                this.size = Math.random() * 10 + 8;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.shape = shapes[Math.floor(Math.random() * shapes.length)];
                this.speedX = Math.random() * 2 - 1;
                this.speedY = Math.random() * 3 + 2;
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 10 - 5;
            }
            update() {
                this.y += this.speedY;
                this.x += this.speedX;
                this.rotation += this.rotationSpeed;
                if (this.y > canvasH) this.reset();
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                ctx.fillStyle = this.color;
                ctx.beginPath();
                if (this.shape === 'circle') {
                    ctx.arc(0, 0, this.size / 2, 0, Math.PI * 2);
                } else if (this.shape === 'triangle') {
                    ctx.moveTo(0, -this.size / 2);
                    ctx.lineTo(this.size / 2, this.size / 2);
                    ctx.lineTo(-this.size / 2, this.size / 2);
                } else {
                    ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                }
                ctx.fill();
                ctx.restore();
            }
        }

        for (let i = 0; i < 100; i++) {
            particles.push(new Particle());
        }

        function animate() {
            ctx.clearRect(0, 0, canvasW, canvasH);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animate);
        }
        animate();

    </script>
</body>
</html>